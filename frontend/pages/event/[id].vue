<template>
  <div :class="['min-h-screen transition-colors duration-500', isDarkMode ? 'dark-theme' : 'light-theme']" @mousemove="handleParallax">
    <Navbar />

    <!-- –ó–≤—ë–∑–¥–Ω—ã–π —Ñ–æ–Ω -->
    <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden">

      <!-- –ú–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã -->
      <div v-for="i in 100" :key="'star-' + i" class="twinkle-star" :style="randomTwinkleStarStyle()" />
      <!-- –ü–∞–¥–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã -->
      <div v-for="i in 30" :key="'falling-' + i" class="falling-star" :style="randomFallingStarStyle()" />
    </div>

    <div class="container mx-auto p-6 relative z-10 pt-20">
      <div class="event-card p-6 rounded-2xl shadow-lg w-full max-w-4xl mx-auto fade-in relative overflow-hidden">
        <div class="event-header p-6 rounded-t-xl">
          <h1 class="text-3xl font-orbitron font-bold">IT –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è 2025</h1>
          <div class="mt-4 flex gap-2 flex-wrap">
            <span class="px-3 py-1 bg-accent bg-opacity-20 rounded-full text-sm">#–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</span>
            <span class="px-3 py-1 bg-accent bg-opacity-20 rounded-full text-sm">#–æ—Ñ–ª–∞–π–Ω</span>
          </div>
        </div>

        <div class="p-6 space-y-4">
          <div class="flex items-center">
            <span class="mr-2">üìÖ</span>
            <p>–î–∞—Ç–∞: 10 –∞–ø—Ä–µ–ª—è 2025 | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2 –¥–Ω—è</p>
          </div>
          <div class="flex items-center">
            <span class="mr-2">üè¢</span>
            <p>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: –û–û–û "–¢–µ—Ö–Ω–æ–°—Ñ–µ—Ä–∞"</p>
          </div>
          <div class="flex items-center">
            <span class="mr-2">üìç</span>
            <p>–§–æ—Ä–º–∞—Ç: –û—Ñ–ª–∞–π–Ω | –ú–µ—Å—Ç–æ: –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 10</p>
          </div>
        </div>

        <div class="map-container mt-6 h-64 rounded-xl flex items-center justify-center border-2 border-dashed">
          <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–∞—Ä—Ç–∞</p>
        </div>

        <div class="p-6 flex justify-end gap-4">
          <button class="px-6 py-2 bg-accent text-white rounded-lg hover:bg-opacity-90 transition">
            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
          </button>
          <button class="exit-button px-6 py-2 text-white rounded-lg hover:bg-opacity-90 transition">
            –í—ã—Ö–æ–¥
          </button>
        </div>
      </div>
    </div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
    <button @click="toggleTheme" class="fixed bottom-4 right-4 p-3 rounded-full shadow-lg z-50 transition-all bg-accent text-white hover:scale-105">
      <svg v-if="isDarkMode" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
      <svg v-else xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
      </svg>
    </button>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import Navbar from '~/components/Navbar.vue'

const isDarkMode = ref(true)
const toggleTheme = () => {
  isDarkMode.value = !isDarkMode.value
}

const randomFallingStarStyle = () => {
    const size = Math.floor(Math.random() * 4) + 1
    const left = Math.random() * 100
    const duration = 5 + Math.random() * 5
    return {
        width: `${size}px`,
        height: `${size}px`,
        left: `${left}%`,
        top: `-${size * 2}px`, // —á—Ç–æ–±—ã –Ω–µ —É–ª–µ—Ç–∞–ª–∏ –≤–≤–µ—Ä—Ö
        animationDuration: `${duration}s`,
        animationDelay: `${Math.random() * 3}s`,
        position: 'absolute',
        background: 'white',
        borderRadius: '50%',
        animationName: 'falling',
        animationTimingFunction: 'linear',
        animationIterationCount: 'infinite'
    }
}


const randomTwinkleStarStyle = () => {
  const size = Math.random() * 2 + 0.5
  return {
    width: `${size}px`,
    height: `${size}px`,
    top: `${Math.random() * 100}%`,
    left: `${Math.random() * 100}%`,
    position: 'absolute',
    background: 'white',
    borderRadius: '50%',
    animation: `twinkle ${2 + Math.random() * 3}s ease-in-out infinite`,
    opacity: Math.random()
  }
}

// –ü–∞—Ä–∞–ª–ª–∞–∫—Å
const parallaxContainer = ref(null)
const handleParallax = (e) => {
  const { innerWidth, innerHeight } = window
  const x = (e.clientX - innerWidth / 2) / innerWidth * 10
  const y = (e.clientY - innerHeight / 2) / innerHeight * 10
  if (parallaxContainer.value) {
    parallaxContainer.value.style.transform = `translate(${x}px, ${y}px)`
  }
}
</script>

<style scoped>
/* –ü–∞–¥–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã */
.falling-star {
  position: absolute;
  background-color: white;
  border-radius: 9999px;
  opacity: 0.8;
  animation: falling linear infinite;
}

@keyframes falling {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(calc(100vh + 20px));
    opacity: 0;
  }
}


/* –ú–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤—ë–∑–¥—ã */
.twinkle-star {
  position: absolute;
  background-color: white;
  border-radius: 50%;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.2; }
  50% { opacity: 1; }
}

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ */
.fade-in {
  animation: fadeIn 1.2s ease forwards;
  opacity: 0;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

/* –¢–µ–º—ã */
.dark-theme {
  background-color: #1A1A2E;
  color: #E4E4F0;
}

.dark-theme .event-card {
  background-color: #2A2A40;
}

.dark-theme .event-header {
  background-color: #3A3A50;
}

.dark-theme .map-container {
  background-color: #3A3A50;
  border-color: #6C63FF;
}

.light-theme {
  background-color: #D5D5E0;
  color: #1A1A2E;
}

.light-theme .event-card {
  background-color: #E4E4F0;
}

.light-theme .event-header {
  background-color: #F0F0F5;
}

.light-theme .map-container {
  background-color: #F0F0F5;
  border-color: #6C63FF;
}

/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
.text-accent {
  color: #6C63FF;
}

.bg-accent {
  background-color: #6C63FF;
}

.exit-button {
  background-color: #FF6584;
}

.exit-button:hover {
  background-color: #e55a78;
}

/* –ù–µ–æ–Ω–æ–≤–∞—è –ø–æ–ª–æ—Å–∫–∞ —Å–±–æ–∫—É –∫–∞—Ä—Ç–æ—á–∫–∏ */
.event-card::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: -6px;
  width: 4px;
  background: linear-gradient(#6C63FF, #FF6584);
  border-radius: 9999px;
  filter: blur(6px);
}

</style>
